{"ast":null,"code":"var _jsxFileName = \"/Users/maktb/DEV/photo-feed/src/views/photo_feed/FeedHome.js\";\nimport * as React from 'react';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport URL from '../../api/url';\nimport useInterSection from '../../hooks/useIntersection';\nimport BookMark from './components/Bookmark';\nimport '../../assets/styles/styles.css';\n\nconst FeedHome = () => {\n  const [isLast, setIsLast] = useState(false);\n  const [feedData, setFeedData] = useState([{\n    id: '',\n    image_url: '',\n    nickname: '',\n    profile_image_url: ''\n  }]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const [isBookmarked, setIsBookmarked] = useState(false);\n  const [_, setRef] = useInterSection(async (entry, observer) => {\n    observer.unobserve(entry.target);\n    setIsLoading(true);\n    setPage(states => states + 1);\n  }, {});\n\n  const onClickBookMark = bookmarkFlag => {\n    localStorage.setItem('a', JSON.stringify(feedData));\n\n    if (bookmarkFlag === 'Y') {} else {}\n  };\n\n  useEffect(() => {\n    const getFeedData = async page => {\n      setIsLoading(true);\n      console.log('page ', page);\n      const {\n        data: [...feeds]\n      } = await axios.get(URL.GET_PHOTO_LIST(page));\n      setIsLoading(false);\n      console.log('feeds', feeds);\n      console.log('feedData.concat(feeds)', feedData.concat(feeds));\n      setFeedData(page === 1 ? feeds : feedData.concat(feeds));\n      console.log('setFeedData', feedData);\n    };\n\n    getFeedData(page);\n  }, [page]);\n  useEffect(() => {\n    if (feedData && feedData.length < 1) {\n      setIsLast(true);\n      setIsLoading(false);\n    }\n  }, [feedData]);\n  useEffect(() => {\n    if (isBookmarked) setFeedData(JSON.parse(localStorage.getItem('a')));else setPage(1);\n  }, [isBookmarked]);\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"contents\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkbox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: () => setIsBookmarked(!isBookmarked),\n    type: \"checkbox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, \"\\uC2A4\\uD06C\\uB7A9\\uD55C \\uAC83\\uB9CC \\uBCF4\\uAE30\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"feedWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, feedData.map((feed, i) => {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: \"box\",\n      key: feed.id,\n      ref: i === feedData.length - 1 && !isLast ? setRef : null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: feed.profile_image_url,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 23\n      }\n    }, feed.nickname + \"/\" + feed.id)), /*#__PURE__*/React.createElement(\"img\", {\n      className: \"boxImg\",\n      src: feed.image_url,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(BookMark, {\n      bookmarkFlag: \"Y\",\n      onClickBookMark: onClickBookMark,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    })));\n  })))));\n};\n\nexport default FeedHome;","map":{"version":3,"sources":["/Users/maktb/DEV/photo-feed/src/views/photo_feed/FeedHome.js"],"names":["React","useState","useEffect","axios","URL","useInterSection","BookMark","FeedHome","isLast","setIsLast","feedData","setFeedData","id","image_url","nickname","profile_image_url","isLoading","setIsLoading","page","setPage","isBookmarked","setIsBookmarked","_","setRef","entry","observer","unobserve","target","states","onClickBookMark","bookmarkFlag","localStorage","setItem","JSON","stringify","getFeedData","console","log","data","feeds","get","GET_PHOTO_LIST","concat","length","parse","getItem","map","feed","i"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nimport URL from '../../api/url';\nimport useInterSection from '../../hooks/useIntersection';\n\nimport BookMark from './components/Bookmark';\n\nimport '../../assets/styles/styles.css';\n\nconst FeedHome = () => {\n  const [isLast, setIsLast] = useState(false);\n  const [feedData, setFeedData] = useState([\n    {\n      id: '',\n      image_url: '',\n      nickname: '',\n      profile_image_url: '',\n    },\n  ]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const [isBookmarked, setIsBookmarked] = useState(false);\n\n  const [_, setRef] = useInterSection(async (entry, observer) => {\n    observer.unobserve(entry.target);\n    setIsLoading(true);\n    setPage((states) => states + 1);\n  }, {});\n\n  const onClickBookMark = (bookmarkFlag) => {\n    localStorage.setItem('a', JSON.stringify(feedData));\n    if (bookmarkFlag === 'Y') {\n    } else {\n    }\n  };\n\n  useEffect(() => {\n    const getFeedData = async (page) => {\n      setIsLoading(true);\n      console.log('page ', page);\n      const {\n        data: [...feeds],\n      } = await axios.get(URL.GET_PHOTO_LIST(page));\n      setIsLoading(false);\n      console.log('feeds', feeds);\n      console.log('feedData.concat(feeds)', feedData.concat(feeds));\n      setFeedData(page === 1 ? feeds : feedData.concat(feeds));\n      console.log('setFeedData', feedData);\n    };\n\n    getFeedData(page);\n  }, [page]);\n\n  useEffect(() => {\n    if (feedData && feedData.length < 1) {\n      setIsLast(true);\n      setIsLoading(false);\n    }\n  }, [feedData]);\n\n  useEffect(() => {\n    if (isBookmarked) setFeedData(JSON.parse(localStorage.getItem('a')));\n    else setPage(1);\n  }, [isBookmarked]);\n\n  return (\n    <section className=\"contents\">\n      <div className=\"wrapper\">\n        <div className=\"checkbox\">\n          <label>\n            <input\n              onChange={() => setIsBookmarked(!isBookmarked)}\n              type=\"checkbox\"\n            />\n            <span>스크랩한 것만 보기</span>\n          </label>\n        </div>\n        <div className=\"feedWrapper\">\n          <ul>\n            {feedData.map((feed, i) => {\n              return (\n                <li\n                  className=\"box\"\n                  key={feed.id}\n                  ref={i === feedData.length - 1 && !isLast ? setRef : null}\n                >\n                  <span>\n                    <div className=\"profile\">\n                      <img src={feed.profile_image_url} alt=\"\"></img>\n                      <p>{feed.nickname + \"/\" + feed.id}</p>\n                    </div>\n                    <img className=\"boxImg\" src={feed.image_url} alt=\"\" />\n                    <BookMark\n                      bookmarkFlag=\"Y\"\n                      onClickBookMark={onClickBookMark}\n                    />\n                  </span>\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default FeedHome;\n"]},"metadata":{},"sourceType":"module"}